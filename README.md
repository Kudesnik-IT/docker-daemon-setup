### Docker Daemon Configuration Script (DDCS)

#### Описание
Этот скрипт автоматизирует процесс настройки конфигурационного файла **Docker Daemon (`daemon.json`)**.

Скрипт выполняет следующие задачи:
- Создает файл `/etc/docker/daemon.json` с указанными параметрами.
- Делает резервную копию существующего файла `daemon.json`, если он уже существует.
- Перезапускает службу Docker и проверяет статус Docker после перезапуска.

---

### Основные функции

1. **Настройка `daemon.json`:**
   - Управление правилами `iptables`.
   - Включение режима восстановления (`live-restore`) для предотвращения остановки контейнеров при перезапуске Docker.
   - Настройка базового IP-адреса и пула адресов для сетей Docker.
   - Отключение поддержки IPv6.

2. **Безопасность:**
   - Перед созданием нового файла делается резервная копия текущего `daemon.json`.
   - Все операции выполняются с проверкой ошибок для надежности.

---

### Зависимости

Для корректной работы скрипта требуются следующие компоненты:
- **Bash** (версии 4.0+)
- **Docker** (версии 20.10+)
- **Coreutils** (для команд `cp`, `echo`, `sleep` и т.д.)
- **Systemd** (для управления службой Docker)

---

### Инструкции по использованию

1. **Скачайте скрипт:**
   ```bash
   wget [https://github.com/your-repo/docker-daemon-config/raw/main/docker_daemon_config.sh](https://raw.githubusercontent.com/Kudesnik-IT/docker-daemon-setup/refs/heads/main/docker_setup.sh)
   ```

2. **Сделайте скрипт исполняемым:**
   ```bash
   chmod +x docker_setup.sh
   ```

3. **Запустите скрипт с правами root:**
   ```bash
   sudo ./docker_setup.sh
   ```

4. **Проверьте изменения:**
   После выполнения скрипта вы можете проверить содержимое файла `/etc/docker/daemon.json` и убедиться, что Docker работает корректно:
   ```bash
   cat /etc/docker/daemon.json
   systemctl status docker
   ```

---

### Пример конфигурации `daemon.json`

После выполнения скрипта ваш файл `/etc/docker/daemon.json` будет выглядеть примерно так:

```json
{
  "iptables": true,
  "live-restore": true,
  "bip": "192.168.2.254/27",
  "ipv6": false,
  "default-address-pools": [{
    "base": "192.168.2.0/24",
    "size": 27
  }]
}
```

- **`iptables`:** Включение управления правилами `iptables` Docker'ом.
- **`live-restore`:** Включение режима восстановления для предотвращения остановки контейнеров при перезапуске Docker.
- **`bip`:** Настройка базового IP-адреса для сети Docker (`docker0`).
- **`ipv6`:** Отключение поддержки IPv6.
- **`default-address-pools`:** Настройка пула IP-адресов для новых сетей Docker.

---

### История изменений

- **v1.0 (2023-11-15):** Первая версия скрипта.

---

### Лицензия

Скрипт распространяется под лицензией **MIT License**. Вы можете свободно использовать, копировать, модифицировать и распространять его.

---

### Спасибо за использование!

Если у вас есть вопросы, предложения или идеи для улучшения, пожалуйста, откройте issue или отправьте pull request. 

[GitHub Repository](https://github.com/Kudesnik-IT/docker-daemon-setup)  
Автор: Kudesnik-IT <kudesnik.it@gmail.com>
